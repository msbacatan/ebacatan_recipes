{% extends 'base.html' %}

{% block title %} My Recipes Administration {% endblock %}


{% block body %} 

<h1>Admin Page</h1>
<hr>
<p>My recipes admin page</p>
<h3>Create your recipe</h3>
  <hr>
  <form method="POST" action="/recipes/add-recipe">

    <p> <label  for="first_name"> Recipe Name: </label>    
    <input type="text" id="first_name" name="first_name" required autofocus ></p>

    <p> <label  for="category"> Category: </label>    
    <input type="text" id="category" name="category" required ></p>
    <p> 
        <label for="category">Categories :</label>
        <select name="category" required>
            <option value="" selected disabled hidden> -- Choose category -- </option>
            {% for category in all_categories %}
           <option value="{{ category['category_name'] }}">{{ category['category_name'] }}</option>
        {% endfor %}
        </select>
    </p>

    <p> <label  for="recipe_owner"> Recipe Owner: </label>    
    <input type="text" id="recipe_owner" name="recipe_owner" required ></p>

    <p> <label  for="password"> Added By: </label>    
    <input type="text" id="password" name="password" required ></p>

    <p> <label  for="added_by"> Date Added: </label>    
    <input type="text" id="added_by" name="added_by" required ></p>

    <p>  
    <input type="submit" value="Add Recipe"></p>

</form>
  <hr>

  <br>
  {% if all_recipes %}
    <table>
        <thead>
            <tr>
                <th>Recipe Name</th>
                <th>Category</th>
                <th>Recipe Owner</th>
                <th>Added By</th>
                <th>Date Added</th>
            </tr>
        </thead>

        <tbody>
            {% for row in all_recipes %}
            <tr>
                
                <td> {{ row['recipe_name'] }}</td>
                <td> {{ row['category'] }}</td>
                <td> {{ row['recipe_owner'] }}</td>
                <td> {{ row['added_by'] }}</td>
                <td> {{ row['date_added'] }}</td>
            
                <td><form action="{{ url_for('admin_delete_user', user_id=row['_id']) }}" method="POST">
                    <input type="submit" value="Delete"  />
                </form>    </td>

                <td><form action="{{ url_for('admin_edit_user', user_id=row['_id']) }}" method="POST">
                    <input type="submit" value="Details"  />
                </form>    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}

{% endblock %}